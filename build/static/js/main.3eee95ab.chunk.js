(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},40:function(e,t,n){e.exports=n.p+"static/media/puff.168fe125.svg"},41:function(e,t,n){e.exports=n.p+"static/media/loading.c5590569.svg"},50:function(e,t,n){e.exports=n(84)},55:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(34),c=n.n(r),i=(n(55),n(7)),l=n(8),s=n(11),u=n(10),d=n(12),m=(n(14),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"goTo",value:function(e){this.props.history.replace("/".concat(e))}},{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return o.a.createElement("div",{className:"App container-fluid"},o.a.createElement("nav",{className:"navbar navbar-default"},o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"navbar-header"},o.a.createElement("button",{type:"button",className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#bs-example-navbar-collapse-1","aria-expanded":"false"},o.a.createElement("span",{className:"sr-only"},"Toggle navigation"),o.a.createElement("span",{className:"icon-bar"}),o.a.createElement("span",{className:"icon-bar"}),o.a.createElement("span",{className:"icon-bar"})),o.a.createElement("a",{className:"navbar-brand",href:"#"},"Get Sh*t Done!")),o.a.createElement("div",{className:"collapse navbar-collapse",id:"bs-example-navbar-collapse-1"},o.a.createElement("ul",{className:"nav navbar-nav navbar-right"},e()&&o.a.createElement("li",{style:{marginTop:"3%"}},"Welcome Back!"),e()&&o.a.createElement("li",null,o.a.createElement("button",{className:"btn btn-default",onClick:this.logout.bind(this)},"Logout")),!e()&&o.a.createElement("button",{className:"btn btn-default",onClick:this.login.bind(this),style:{marginTop:"5%"}},"Login"))))))}}]),t}(a.Component)),h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var f=n(47),g=n(88),v=n(87),b=n(5),E=n(35),k=n.n(E),y=n(16),w=n(15),j=n.n(w);function O(){var e=Object(y.a)(["\n  mutation del($id: Int!) {\n    delete_todos(\n      where: {id: { _eq: $id }}\n    ) {\n      affected_rows\n    }\n  }\n"]);return O=function(){return e},e}function _(){var e=Object(y.a)(["\n  {\n    todos(\n      where: { completed: {_eq: true }},\n      order_by: {id: desc}\n    ) {\n      id\n      todo_name\n      completed\n      user_id\n    }\n  }\n"]);return _=function(){return e},e}function N(){var e=Object(y.a)(["\n  mutation mark($id: Int!) {\n    update_todos(\n      where: {id: { _eq: $id }},\n      _set: { completed: true }\n    ) {\n      affected_rows\n    }\n  }\n"]);return N=function(){return e},e}function T(){var e=Object(y.a)(["\n  mutation addTodo($todo_name: String!, $user_id: String!) {\n    insert_todos(objects: [\n      {\n        todo_name: $todo_name,\n        user_id: $user_id\n        completed: false\n      }\n    ]) {\n      returning {\n        id\n        todo_name\n        completed\n        user_id\n      }\n    }\n  }\n"]);return T=function(){return e},e}function S(){var e=Object(y.a)(["\n  {\n    todos (\n      where: { completed: { _eq: false }},\n      order_by: {id: desc}\n    ) {\n      id\n      todo_name\n      completed\n      user_id\n    }\n  }\n"]);return S=function(){return e},e}var I=j()(S()),x=j()(T()),A=j()(N()),q=j()(_()),C=j()(O()),$=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"completedTask",value:function(e,t,n){k()("#"+e+" h3").css({"text-decoration":"line-through"}),t({variables:{id:e},refetchQueries:[{query:I},{query:q}]})}},{key:"deleteTodo",value:function(e,t,n){t({variables:{id:e},refetchQueries:[{query:I},{query:q}]})}},{key:"render",value:function(){var e=this;return o.a.createElement(b.b,{mutation:A},function(t,n){n.data;return o.a.createElement("div",{className:"todos",onClick:e.completedTask.bind(e,e.props.data.id,t),id:e.props.data.id},o.a.createElement(b.b,{mutation:C},function(t,n){n.data1;return o.a.createElement("div",null,o.a.createElement("i",{className:"fas fa-times-circle cross","data-toggle":"tooltip","data-placement":"top",title:"click to delete",onClick:e.deleteTodo.bind(e,e.props.data.id,t)}),o.a.createElement("h3",null,"".concat(e.props.data.todo_name)))}))})}}]),t}(a.Component),W=n(40),B=n.n(W),U=function(){return o.a.createElement("div",{className:"todo-loader"},o.a.createElement("img",{src:B.a,width:"50",height:"50"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h4",null,"Fetching the todos for you"))},D=function(){return o.a.createElement(b.c,{query:I},function(e){var t=e.loading,n=e.error,a=e.data;return t?o.a.createElement(U,null):n?o.a.createElement("p",{className:"todo-list"},"Error ",console.log(n)):0==a.todos.length?o.a.createElement("h3",{className:"todo-list"},"Ace! All done! "):a.todos.map(function(e){return o.a.createElement("div",{key:e.id,className:"todo-list","data-toggle":"tooltip","data-placement":"left",title:"click to mark completed"},o.a.createElement($,{data:e}))})})},J=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getUser",value:function(){return localStorage.getItem("sub")}},{key:"addnewTodo",value:function(e,t){if(13===t.which){var n=this.getUser();console.log(n),e({variables:{todo_name:t.target.value,user_id:n},refetchQueries:[{query:I},{query:q}]}).catch(function(e){console.log(e)}),t.target.value=""}}},{key:"render",value:function(){var e=this;return o.a.createElement(b.b,{mutation:x},function(t,n){n.data;return o.a.createElement("div",null,o.a.createElement("input",{type:"text",className:"form-control inp-todo",placeholder:"What's on your mind?",onKeyPress:e.addnewTodo.bind(e,t)}))})}}]),t}(a.Component),K=function(){return o.a.createElement(b.c,{query:q},function(e){var t=e.loading,n=e.error,a=e.data;return t?o.a.createElement("p",null):n?o.a.createElement("p",{className:"todo-list"},"Error "):a.todos.map(function(e){return o.a.createElement("div",{key:e.id,className:"todo-list-completed","data-toggle":"tooltip","data-placement":"left",title:"already marked completed"},o.a.createElement($,{data:e}))})})},L="https://shraddhaag-todo.herokuapp.com/v1/graphql",Q="shraddhaag.auth0.com",z="3q6jY11RBz5BKF2YoBKxcF7Ep8vKcsfx",F="https://shraddhaag-todo-react.herokuapp.com/callback",Y=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"login",value:function(){this.props.auth.login()}},{key:"render",value:function(){return(0,this.props.auth.isAuthenticated)()&&o.a.createElement("div",{className:"App container-fluid"},o.a.createElement("h1",{className:"title"},"Your Todos"),o.a.createElement("div",{className:"col-md-2"}),o.a.createElement("div",{className:"col-md-8"},o.a.createElement(J,null),o.a.createElement(D,null),o.a.createElement(K,null)),o.a.createElement("div",{className:"col-md-2"}))}}]),t}(a.Component),P=n(41),R=n.n(P),G=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},o.a.createElement("img",{src:R.a,alt:"loading"}))}}]),t}(a.Component),H=n(42),M=n.n(H)()(),V=n(43),X={domain:Q,clientId:z,callbackUrl:F},Z=function(){function e(){Object(i.a)(this,e),this.auth0=new V.a.WebAuth({domain:X.domain,clientID:X.clientId,redirectUri:X.callbackUrl,responseType:"token id_token",scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)}return Object(l.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash(function(t,n){n&&n.accessToken&&n.idToken?(e.setSession(n),M.replace("/content")):t&&(M.replace("/content"),console.log(t),alert("Error: ".concat(t.error,". Check the console for further details.")))})}},{key:"setSession",value:function(e){var t=JSON.stringify(1e3*e.expiresIn+(new Date).getTime());localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),localStorage.setItem("sub",e.idTokenPayload.sub),localStorage.setItem("expires_at",t),M.replace("/")}},{key:"logout",value:function(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),M.replace("/")}},{key:"isAuthenticated",value:function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e}}]),e}(),ee=n(72),te=n(86),ne=n(45),ae=new(n(48).a)({uri:L}),oe=Object(ne.a)(function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(f.a)({},n,{authorization:a?"Bearer ".concat(a):""})}}),re=new ee.a({link:oe.concat(ae),cache:new te.a({addTypename:!1})}),ce=function(e){return o.a.createElement(b.a,{client:re},e)},ie=new Z,le=o.a.createElement(g.a,{history:M},o.a.createElement("div",null,o.a.createElement(v.a,{path:"/",render:function(e){return ce(o.a.createElement(m,Object.assign({auth:ie},e)))}}),o.a.createElement(v.a,{path:"/content",render:function(e){return ce(o.a.createElement(Y,Object.assign({auth:ie},e)))}}),o.a.createElement(v.a,{path:"/callback",render:function(e){var t;return t=e.location,/access_token|id_token|error/.test(t.hash)&&ie.handleAuthentication(),o.a.createElement(G,e)}})));c.a.render(le,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");h?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):p(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):p(e)})}}()}},[[50,2,1]]]);
//# sourceMappingURL=main.3eee95ab.chunk.js.map